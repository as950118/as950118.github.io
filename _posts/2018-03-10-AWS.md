---

layout : default
title : "NodeJS-AWS"
tags : NodeJS

---

# AWS

Amazon Web Service의 줄임말입니다.

서버 운영하는 것을 도와주는 서비스 입니다.

먼저 그에 앞서 **회원가입**을 하도록 하겠습니다.

## 회원가입

공부하는 입장이기에 **personal(개인)**로 가입하도록 하겠습니다.

추후에 요금이 청구되는 상황이 있을 수 있으므로 주소는 정확히 입력하시는 것이 좋습니다.

주소를 모르신다면 [영어주소 찾기](https://search.naver.com/search.naver?where=nexearch&sm=top_hty&fbm=1&ie=utf8&query=%EC%A3%BC%EC%86%8C+%EC%98%81%EC%96%B4+%EB%B3%80%ED%99%98)에서 찾으면 됩니다.

visa나 master처럼 해외 결제가 가능한 카드 번호를 입력해 주도록 합니다.

가입이 완료되면 로그인을 합니다.

로그인 후 **EC2**를 생성하도록 하겠습니다.

## EC2

Elastic Computer Cloud의 줄임말 입니다.

쉽게 설명하자면, 컴퓨터를 빌려주는 것입니다.

물론 하드웨어적인 것이 아니라 소프트웨어적으로.

그러면 EC2를 생성해보겠습니다.

생성에 앞서 **우측 상단**을 보시면 **지역**을 선택할 수 있습니다.

**서울**로 선택하도록 합니다.

저는 os로 **ubuntu**를 사용하겠습니다.

생성하고 진행하면 **.pem** 형식의 key를 생성할 것 입니다.

이것은 해당 EC2에 접근하기 위한 key이므로 항상 잘 간직하고 있어야합니다.

그렇게 생성하고나면 EC2 페이지로 이동할 것입니다.

그 중에서 **instance(인스턴스)**를 보겠습니다.

인스턴스란 하나의 EC2, 즉 하나의 컴퓨터를 의미합니다.

이 인스턴스의 **state(상태)**가 **initializing(초기화)**이 완료될 때 까지 기다립니다.

완료 되면 이제 접속하도록 해보겠습니다.

## 인스턴스 접속

윈도우에서 인스턴스에 접속하는 것은 2가지 방법이 있습니다.

**java**를 이용하는 것과 **putty**같은 프로그램을 이용하여 접속하는 것입니다.

전자를 이용하는 방법이 오류가 발생하여 후자를 이용하도록 하겠습니다.

## putty

먼저 [putty설치](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html)로 들어가서 **package** 중에 각자 환경에 맞는 버젼을 설치하도록 합니다.

설치가 완료되면 **puttygen**을 실행합니다.

>### puttygen
>
> 이 프로그램은 아까 생성한 **.pem**형식의 키를 **.ppk**로 변환하여 줍니다.
>
> #### 사용법
>
>실행하면 화면 하단의 **Load**를 선택합니다.
>
>그리고 아까 생성한 .pem 형식의 키를 찾습니다.
>
>보이지 않는다면 형식을 **All Files**로 바꾸어 봅니다.
>
>로드가 완료되면 **Save Private Key**를 눌러 저장합니다.
>
>누르면 암호에 관한 경고창이 뜨는데 **Yes**눌러 진행합니다.
>
>되도록 이름은 .pem 형식의 키와 동일하게 하도록 합니다.

생성이 완료되었으면 연결을 해보도록 하겠습니다.

**putty**를 실행합니다.

실행하고 왼쪽 **Category** 중 **Session**을 선택합니다.

**Host Name(or Ip address)**를 입력하는 곳에 **public DNS(퍼블릭 DNS)**를 입력합니다.

이 퍼블릭 DNS는 AWS의 EC2 대시보드에서 인스턴스를 선택한 후 **하단**에서 확인할 수 있습니다.

그 후 카테고리 중 **SSH**를 선택합니다.

그리고 **Auth**를 선택합니다.

우측 창에서 **Authentication parameters**안에 있는 **Browser(브라우저)**를 선택합니다.

브라우저에서 방금 생성한 .ppk 형식의 키를 선택합니다.

하단의 **open(오픈)**을 선택합니다.

콘솔형태의 창에 **login as**라는 문장이 출력됩니다.

그러면 **ubuntu**를 입력하여 접속합니다.

우분투 서버에서는 **root**계정이 ubuntu로 되어있기 때문입니다.

비밀번호는 설정되어있지 않습니다.

그러면 이제 이 인스턴스에 **Apache 서버**를 설치하도록 하겠습니다.

## Apache 서버 설치

먼저 **sudo apt-get install update;** 라는 명령어를 입력합니다.

>apt-get을 업데이트 하는 것입니다. apt-get이란 npm, pip같이 모듈 설치를 도와주는 존재입니다.

업데이트가 완료되면 **sudo apt-get install apache2;**를 입력합니다.

이제 apache가 설치되었습니다.

하지만 현재 상태에서는 방화벽이 ssh를 제외한 나머지 접근을 차단합니다.

하지만 우리는 어디서나 접속 할 수 있기 위해 http를 이용해야 합니다.

그러면 이제 **방화벽**을 수정하는 작업을 하겠습니다.

## 방화벽 수정

다시 AWS의 EC2대시보드로 돌아갑니다.

좌측 카테고리에서 **NETWORK & SECUIRTY** 중 **security groups(보안그룹)**를 봅니다.

그 중에서 **그룹 이름**이 **launch-wizard** 인 것이 방화벽입니다.

하단을 보면 설명, 인바운드, 아웃바운드, 태그 등이 있을 것 입니다.

들어가서 **inbound(인바운드)** 를 봅니다.

>인바운드란 클라이언트가 서버로 접근하는 것을 의미합니다.
>
>반대로 아웃바운드는 서버에서 클라이언트로 전송하는 것을 의미합니다.

보면 현재에는 SSH에 대한 접근만 설정되어 있습니다.

그러면 **Edit(편집)**를 선택합니다.

**규칙추가** 선택합니다.

**유형**을 **HTTP**로 선택합니다.

프로토콜과 포트번호는 고정되어있지만 **Source(소스)**는 변경 가능 합니다.

추후에 조금 더 보안에 유익하게끔 설정할 수 있지만 현재는 기본 설정(0.0.0.0/0)으로 진행합니다.

>만약 소스에 특정 IP를 설정하면, 그 IP를 가진 클라이언트, 혹은 그 IP를 경유해야만이 접속이 가능합니다. 이를 이용하여 조금 더 보안 수준을 높일수 있습니다.

이제 퍼블릭 DNS를 통해 누구나 해당 인스턴스에 접속할 수 있게 되었습니다.
